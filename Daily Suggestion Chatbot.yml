app:
  description: ''
  icon: speech_balloon
  icon_background: '#E4FBCC'
  mode: chat
  name: Daily Suggestion Chatbot
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.0.56@42a5fb7bc09b2f14f9d19f0ac79bec42c3c50dba07a52bf1b6d3abcd6906c739
    version: null
kind: app
model_config:
  agent_mode:
    enabled: false
    max_iteration: 10
    strategy: function_call
    tools: []
  annotation_reply:
    enabled: false
  chat_prompt_config: {}
  completion_prompt_config: {}
  dataset_configs:
    datasets:
      datasets:
      - dataset:
          enabled: true
          id: ffb27e92-1766-49f7-a9dc-a48e353934a3
    reranking_enable: true
    reranking_mode: reranking_model
    reranking_model:
      reranking_model_name: gte-rerank
      reranking_provider_name: langgenius/tongyi/tongyi
    retrieval_model: multiple
    score_threshold: 0.5
    score_threshold_enabled: true
    top_k: 4
    weights:
      keyword_setting:
        keyword_weight: 0.3
      vector_setting:
        embedding_model_name: text-embedding-v3
        embedding_provider_name: langgenius/tongyi/tongyi
        vector_weight: 0.7
      weight_type: customized
  dataset_query_variable: ''
  external_data_tools: []
  file_upload:
    allowed_file_extensions:
    - .JPG
    - .JPEG
    - .PNG
    - .GIF
    - .WEBP
    - .SVG
    - .MP4
    - .MOV
    - .MPEG
    - .WEBM
    allowed_file_types: []
    allowed_file_upload_methods:
    - remote_url
    - local_file
    enabled: false
    image:
      detail: high
      enabled: false
      number_limits: 3
      transfer_methods:
      - remote_url
      - local_file
    number_limits: 3
  model:
    completion_params:
      max_tokens: 2500
      response_format: text
      stop: []
      temperature: 0.3
      top_p: 0.8
    mode: chat
    name: qwen-plus
    provider: langgenius/tongyi/tongyi
  more_like_this:
    enabled: false
  opening_statement: Hello! I'm your Recovery Companion. You're welcome to ask for
    food and movement suggestions, or simply share how you're feeling now. 🌟
  pre_prompt: '# Role Positioning

    You are a nutritional companion assistant specializing in supporting individuals
    with eating disorder recovery. Your name is "Recovery Companion".


    # Core Principles

    ## Safety First

    - Absolutely prohibit discussing: specific calorie numbers, weight numbers, BMI,
    calorie calculations

    - Forbid using judgmental vocabulary: good/bad, right/wrong, should/shouldn''t,
    healthy/unhealthy

    - Forbid providing weight loss advice or weight management plans


    ## Language Style

    - Use warm, accepting, non-judgmental language

    - Focus on "feelings" rather than "numbers"

    - Emphasize body function rather than appearance

    - Use "perhaps you could try" rather than "you should"


    ## Professional Boundaries

    - Clearly state that you are not a medical professional

    - When serious medical issues are involved, recommend consulting a professional
    doctor

    - Focus on providing emotional support and general advice


    # Personalized Services

    ## Basic Profile:

    - Age: {{age}} years old

    - Gender: {{gender}}

    - Height: {{height}}cm

    - Eating Disorder Type: {{ED_type}}


    ## Recovery Status:

    - Recovery Stage: {{recovery_stage}}

    - Fear Foods: {{fear_foods}}


    ## Dynamic Status:

    - Movement Intention: {{movement_intention}}

    - Mood State: {{mood_state}}

    - Hunger Level: {{hunger_level}}


    Based on the above information, provide personalized dietary and exercise suggestions.


    # Conversation Guidance


    ## Personalized Responses

    - Adjust support focus based on the `{{recovery_stage}}` phase

    - Consider the special needs of `{{ED_type}}` type, avoiding {{fear_foods}} in
    dietary suggestions

    - Combine `{{mood_state}}`, `{{movement_intention}}` and `{{hunger_level}}` to
    provide appropriate suggestions for the current state


    ## Crisis Response

    When crisis signals are detected:

    1. Immediately stop specific suggestions

    2. Shift to emotional support

    3. Recommend professional medical help


    # Conversation Flow

    1. First confirm the user''s current state and needs

    2. Provide suggestions based on user data and knowledge base

    3. Always pay attention to the user''s emotional feelings

    4. Encourage but do not force users to try suggestions'
  prompt_type: simple
  retriever_resource:
    enabled: true
  sensitive_word_avoidance:
    enabled: false
  speech_to_text:
    enabled: false
  suggested_questions: []
  suggested_questions_after_answer:
    enabled: true
  text_to_speech:
    enabled: false
    language: ''
    voice: ''
  user_input_form:
  - number:
      default: ''
      label: age
      required: true
      variable: age
  - select:
      default: male
      label: gender
      options:
      - male
      - female
      required: true
      variable: gender
  - number:
      default: ''
      label: height in centimetre
      required: true
      variable: height
  - select:
      default: ''
      label: Eating Disorder category
      options:
      - Anorexia nervosa
      - Bulimia nervosa
      - Binge eating disorder
      - Avoidant or restrictive food intake disorder
      required: true
      variable: ED_type
  - select:
      default: ''
      label: Current stage of recovery
      options:
      - Beginning the journey
      - Building consistent habits
      - Sustaining recovery progress
      required: true
      variable: recovery_stage
  - text-input:
      default: ''
      label: Fear foods to avoid
      max_length: 48
      required: true
      variable: fear_foods
  - select:
      default: Gentle Relaxation 🍃
      label: What movement calls to you?
      options:
      - Gentle Relaxation 🍃
      - Energy Boost 💪
      - Mood Improvement 😌
      - Body Awareness 🌸
      - Rest Day 🛌
      - Open to Suggestions 🤔
      required: true
      variable: movement_intention
  - select:
      default: Neutral 🙂
      label: How are you feeling today?
      options:
      - Very Low 😔
      - Low 😟
      - Somewhat Low 😐
      - Neutral 🙂
      - Good 😊
      - Very Good 😄
      - Excellent 🌟
      required: true
      variable: mood_state
  - select:
      default: Moderately Hungry
      label: What's your hunger like right now?
      options:
      - Slightly full
      - Not Hungry at All
      - Slightly Hungry
      - Moderately Hungry
      - Quite Hungry
      - Very Hungry
      required: true
      variable: hunger_level
version: 0.4.0
